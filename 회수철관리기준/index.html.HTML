<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회수철 분류 관리 기준</title>
    <!-- Tailwind CSS (스타일링) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome (아이콘) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 폰트 설정 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* 모바일에서 탭 하이라이트 색상 제거 (선택적) */
        * { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-3 md:p-8">

    <div class="max-w-7xl mx-auto">
        
        <!-- 헤더 섹션 -->
        <div class="mb-6 md:mb-8 text-center md:text-left pt-2">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">
                회수철 분류 관리 기준
            </h1>
            <p class="text-gray-500 text-xs md:text-base flex items-center justify-center md:justify-start gap-2">
                <i class="fas fa-circle-info"></i>
                작성일: 2025.02.19 | 현장 식별용 마킹 색상 및 재질 구분표
            </p>
        </div>

        <!-- 검색 및 필터 컨트롤 -->
        <div class="bg-white p-3 md:p-4 rounded-xl shadow-sm border border-gray-200 mb-6 md:mb-8 sticky top-2 z-10">
            <div class="flex flex-col md:flex-row gap-3 md:gap-4 items-center justify-between">
                
                <!-- 검색창 -->
                <div class="relative w-full md:w-96">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-search text-gray-400"></i>
                    </div>
                    <!-- 모바일에서 입력 시 줌 방지를 위해 text-base (16px) 적용 -->
                    <input
                        type="text"
                        id="searchInput"
                        class="block w-full pl-10 pr-3 py-2.5 md:py-2 text-base border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-400 focus:outline-none focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out"
                        placeholder="강종 검색 (예: SUS630, F316L)"
                    >
                </div>

                <!-- 카테고리 필터 버튼 -->
                <div class="flex gap-2 overflow-x-auto w-full md:w-auto pb-1 scrollbar-hide py-1" id="categoryFilters">
                    <!-- 자바스크립트로 버튼 생성됨 -->
                </div>
            </div>
        </div>

        <!-- 메인 콘텐츠: 카드 그리드 -->
        <div id="cardContainer" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6 pb-10">
            <!-- 자바스크립트로 카드가 생성됨 -->
        </div>

        <div id="emptyState" class="hidden col-span-full flex flex-col items-center justify-center py-12 text-gray-400">
            <i class="fas fa-filter text-5xl mb-4 opacity-20"></i>
            <p class="text-lg font-medium">검색 결과가 없습니다.</p>
            <p class="text-sm">다른 검색어나 분류를 선택해보세요.</p>
        </div>

        <div class="mt-8 text-center text-xs text-gray-400 border-t border-gray-200 pt-6 pb-6">
           Scrap Iron Classification Standard Table • 2025.02.19 Updated
        </div>
    </div>

    <script>
        // 데이터 정의
        const data = [
            {
                id: 'P1',
                group: 'SC',
                colorName: '연녹색 (Light Green)',
                colorClass: 'bg-green-100 border-green-300',
                badgeClass: 'bg-green-200 text-green-800',
                note: 'CARBON',
                materials: [
                    'TW 694F70 M2', 'TW 266M GR.2 V', 'TW P1', 'TW S35C', 'TW S48C', 'TW S45SU',
                    'TWS355', 'TWS355Mn', 'TW 266M GR.2', 'TW SSW R-1', 'TW F1', 'TW B50 A517',
                    'S355NL', 'TW 694F70 M3', 'TW S25C', 'TW A668CL.E', 'EH36', 'TW 105',
                    'TW S44SY', 'TW B50A974A', 'TW 350LF2', 'TW 350LF2 MOD', 'SA266Gr2C', 'TW 350LF6',
                    'JB4726 20MnMo4', 'C-STEEL', 'TW S30Mn', 'TWVL E36', 'TW S30H', 'TW 694F70',
                    'TW 694F65 M6', 'A860WPHYF70', 'ASME SA765 GR.4', 'B50A517', 'TW 765GR4',
                    'TW 765Gr.4 M2', 'TW SF490AS1'
                ]
            },
            {
                id: 'P1-1',
                group: 'SC',
                colorName: '살구색 (Apricot)',
                colorClass: 'bg-orange-50 border-orange-200',
                badgeClass: 'bg-orange-100 text-orange-800',
                note: 'CARBON',
                materials: [
                    'TW S360', 'TW SF490', 'TW SF490V', 'TW SF490V M1', 'TW SF590', 'TW SF590M1',
                    'TW SF590S'
                ]
            },
            {
                id: 'P2',
                group: 'SCM',
                colorName: '황색 (Yellow)',
                colorClass: 'bg-yellow-100 border-yellow-300',
                badgeClass: 'bg-yellow-200 text-yellow-800',
                note: 'CARBON / Low Alloy',
                materials: [
                    'TW F22', 'TW SCM430', 'TW42CrMo4 M', 'TW SCM440', 'TW K11B64A', 'SFCM880',
                    'TW F11 Modi', 'TW 4130 M2', 'TWCrMo825', 'SCM440', 'ASME SA336 GR.F12 MOD1',
                    'TW 4140', 'TW S17MoS', 'TW SCM435', '42CrMo4', 'TW F1', 'TW SFCM830',
                    'TW 4130 M5'
                ]
            },
            {
                id: 'P2-1',
                group: 'SNCM',
                colorName: '은색 (Silver)',
                colorClass: 'bg-slate-200 border-slate-400',
                badgeClass: 'bg-slate-300 text-slate-800',
                note: 'ALLOY',
                materials: [
                    'SNCM439', 'SNCM431M', 'TW 4340 M1', '34CrNiMo6', 'TW 508Gr4N',
                    'TW 18CrNiMo7-6', 'SKT4', 'TW P4', 'WSTE 460'
                ]
            },
            {
                id: 'P3',
                group: 'STS 304',
                colorName: '적색 (Red)',
                colorClass: 'bg-red-100 border-red-300',
                badgeClass: 'bg-red-200 text-red-800',
                note: 'Stainless Steel',
                materials: [
                    'TW F304L', 'TW F304H', 'TW F321H', 'TW F347H'
                ]
            },
            {
                id: 'P4',
                group: 'STS 316',
                colorName: '주황 (Orange)',
                colorClass: 'bg-orange-200 border-orange-400',
                badgeClass: 'bg-orange-300 text-orange-900',
                note: 'Stainless Steel',
                materials: [
                    'TW F316L', 'TW F316L P', 'TW F317L', 'TW F316 Ti'
                ]
            },
            {
                id: 'P5',
                group: 'STS 400',
                colorName: '분홍 (Pink)',
                colorClass: 'bg-pink-100 border-pink-300',
                badgeClass: 'bg-pink-200 text-pink-800',
                note: 'Stainless Steel',
                materials: [
                    'TW F6a', 'TW F9', 'TW F5', 'TW F91', 'TW X11 CrMo12-1'
                ]
            },
            {
                id: 'P6',
                group: 'SKD',
                colorName: '연청 (Light Blue)',
                colorClass: 'bg-sky-100 border-sky-300',
                badgeClass: 'bg-sky-200 text-sky-800',
                note: 'Tool Steel (공구강)',
                materials: [
                    'TW SKD61', 'TW F22V'
                ]
            },
            {
                id: 'P7',
                group: 'SKH',
                colorName: '검정 (Black)',
                colorClass: 'bg-gray-100 border-gray-600',
                badgeClass: 'bg-gray-700 text-white',
                note: 'Tool Steel (공구강)',
                materials: [
                    'TW F92'
                ]
            },
            {
                id: 'P8',
                group: 'STS Cu',
                colorName: '백색 (White)',
                colorClass: 'bg-white border-gray-200 shadow-sm',
                badgeClass: 'bg-gray-100 text-gray-800 border border-gray-200',
                note: 'Special STS',
                materials: [
                    'TW 17-4', 'SUS630', 'TW 06X12H3Д'
                ]
            },
            {
                id: 'P9',
                group: 'STS Dual',
                colorName: '아이보리 (Ivory)',
                colorClass: 'bg-amber-50 border-amber-200',
                badgeClass: 'bg-amber-100 text-amber-800',
                note: 'Special STS',
                materials: [
                    'TW F51', 'TW F53'
                ]
            }
        ];

        let currentSearch = '';
        let currentCategory = 'All';

        const searchInput = document.getElementById('searchInput');
        const categoryContainer = document.getElementById('categoryFilters');
        const cardContainer = document.getElementById('cardContainer');
        const emptyState = document.getElementById('emptyState');

        // 필터 버튼 생성
        const categories = ['All', 'P1', 'P1-1', 'P2', 'P2-1', 'P3', 'P4', 'P5', 'P6', 'P7', 'P8', 'P9'];
        
        categories.forEach(cat => {
            const btn = document.createElement('button');
            btn.textContent = cat === 'All' ? '전체 보기' : cat;
            // 모바일 터치 영역 확대 (py-2.5)
            btn.className = `px-4 py-2.5 md:py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors flex-shrink-0 ${cat === 'All' ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`;
            btn.dataset.category = cat;
            btn.onclick = () => setCategory(cat, btn);
            categoryContainer.appendChild(btn);
        });

        // 렌더링 함수
        function render() {
            cardContainer.innerHTML = '';
            
            const filtered = data.map(item => {
                if (currentCategory !== 'All' && item.id !== currentCategory) return null;

                const searchLower = currentSearch.toLowerCase();
                const matchesSearch = 
                    item.id.toLowerCase().includes(searchLower) ||
                    item.group.toLowerCase().includes(searchLower) ||
                    item.materials.some(m => m.toLowerCase().includes(searchLower));

                if (!matchesSearch) return null;

                // 검색어가 있을 때 매칭되는 재질 필터링
                const displayMaterials = currentSearch 
                    ? item.materials.filter(m => m.toLowerCase().includes(searchLower))
                    : item.materials;
                
                // 재질이 없지만 카테고리나 그룹명이 매칭된 경우 전체 표시
                const finalMaterials = displayMaterials.length > 0 ? displayMaterials : item.materials;

                return { ...item, materials: finalMaterials };
            }).filter(Boolean);

            if (filtered.length === 0) {
                cardContainer.classList.add('hidden');
                emptyState.classList.remove('hidden');
                emptyState.classList.add('flex');
            } else {
                cardContainer.classList.remove('hidden');
                emptyState.classList.add('hidden');
                emptyState.classList.remove('flex');

                filtered.forEach(item => {
                    const card = document.createElement('div');
                    // Tailwind border/bg class parsing needs to handle opacity for header
                    const borderColor = item.colorClass.split(' ').find(c => c.startsWith('border-')) || 'border-gray-200';
                    
                    card.className = `rounded-xl border-l-8 shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden bg-white ${borderColor}`;
                    
                    // 개선된 배지 레이아웃 (gap-2 사용, 마진 제거)
                    const materialsHtml = item.materials.length > 0 
                        ? item.materials.map(m => `<span class="inline-flex items-center px-2.5 py-1.5 rounded text-sm font-medium ${item.badgeClass} hover:opacity-80 transition-opacity cursor-default break-words">${m}</span>`).join('')
                        : `<div class="w-full text-center py-4 border-2 border-dashed border-gray-200 rounded-lg"><p class="text-gray-400 text-sm">일치하는 강종 없음</p></div>`;

                    // 카드 헤더 배경색 처리를 위해 colorClass 사용
                    // 모바일 폰트 사이즈 최적화 (text-xl, text-xs)
                    
                    card.innerHTML = `
                        <div class="p-3 md:p-4 border-b border-gray-100 ${item.colorClass} bg-opacity-30">
                            <div class="flex justify-between items-start mb-1">
                                <div>
                                    <h2 class="text-xl md:text-2xl font-bold text-gray-800">${item.id}</h2>
                                    <span class="text-xs md:text-sm font-semibold text-gray-600 tracking-wider">${item.group} Group</span>
                                </div>
                                <div class="flex flex-col items-end">
                                    <span class="text-[10px] md:text-xs font-bold text-gray-500 uppercase mb-1">Marking Color</span>
                                    <span class="px-2 md:px-3 py-1 rounded-full text-xs font-bold border bg-white bg-opacity-50 border-opacity-20 whitespace-nowrap ${borderColor}">
                                        ${item.colorName}
                                    </span>
                                </div>
                            </div>
                            <div class="text-[10px] md:text-xs text-gray-500 flex justify-between items-end mt-2">
                                <span>비고: ${item.note}</span>
                                <span>포함 강종 수: ${item.materials.length}개</span>
                            </div>
                        </div>
                        <div class="p-3 md:p-4 bg-white">
                            <div class="flex flex-wrap gap-2">
                                ${materialsHtml}
                            </div>
                        </div>
                    `;
                    cardContainer.appendChild(card);
                });
            }
        }

        function setCategory(cat, btnElement) {
            currentCategory = cat;
            // 버튼 스타일 업데이트
            Array.from(categoryContainer.children).forEach(btn => {
                if (btn === btnElement) {
                    btn.className = 'px-4 py-2.5 md:py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors flex-shrink-0 bg-blue-600 text-white shadow-md';
                } else {
                    btn.className = 'px-4 py-2.5 md:py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors flex-shrink-0 bg-gray-100 text-gray-600 hover:bg-gray-200';
                }
            });
            render();
        }

        searchInput.addEventListener('input', (e) => {
            currentSearch = e.target.value;
            render();
        });

        // 초기 렌더링
        render();

    </script>
</body>
</html>